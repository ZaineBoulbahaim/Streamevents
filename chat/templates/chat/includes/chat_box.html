<div class="chat-container border rounded"
     data-event-id="{{ event.id }}"
     data-is-creator="{% if user == event.creator %}true{% else %}false{% endif %}"
     data-status="{{ event.status }}">

    <!-- Cabecera -->
    <div class="chat-header d-flex justify-content-between align-items-center bg-light p-3 border-bottom">
        <h5 class="mb-0">ğŸ’¬ Xat en Directe</h5>
        <span class="badge bg-primary" id="message-count">0</span>
    </div>

    <!-- Ãrea de mensajes -->
    <div id="chat-messages" class="chat-messages p-3">
        <p class="text-muted">Carregant missatges...</p>
    </div>

    <!-- Errores -->
    <div id="chat-errors" class="text-danger px-3 mb-2"></div>

    <!-- Formulario de envÃ­o -->
    <form id="chat-form" class="chat-form d-flex gap-2 px-3 pb-3">
        {% csrf_token %}
        <textarea id="chat-input" class="form-control" rows="2" maxlength="500"
            placeholder="{% if not user.is_authenticated %}Inicia sessiÃ³ per participar{% elif event.status != 'live' %}El xat nomÃ©s estÃ  disponible durant l'esdeveniment{% else %}Escriu el teu missatge...{% endif %}"
            {% if not user.is_authenticated or event.status != 'live' %} disabled {% endif %}></textarea>
        <button type="submit" class="btn btn-primary"
            {% if not user.is_authenticated or event.status != 'live' %} disabled {% endif %}>Enviar</button>
    </form>
</div>
